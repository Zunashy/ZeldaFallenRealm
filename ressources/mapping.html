<h1 id="guidedecrationdesmaps">Guide de création des maps</h1>

<p>Les maps sont les environements où Link évoluera dans le jeu. Elles sont donc fondamentales à son fonctionnement.</p>

<p>Les maps sont composées d'un décor "inerte" (donc à peu de chose près, une image de fond et des éléments de terrain), les tiles ; et d'entités dynamiques généralement contrôlées par un script (dont Link !). <br />
Dans ce guide je présenterai la méthodes à suivre pour créer et éditer des maps, placer les tiles, et les entités, etc.</p>

<p>Avant de commencer, ouvrez solarus (sans blague) et ouvrez une map en double-cliquant dessus dans l'arborescence à gauche ; ou créez en une avec clic droit sur le dossier qui la contiendra (les maps sont toujours organisées en dossiers) -> Nouvelle map.</p>

<p><img src="img/mapeditor1.png" alt="Image indisponible" /></p>

<p>A droite, l'aperçu de la map ; dans la partie centale haute vous pouvez modifier certains propriétés de votre map, telles que sa taille ou la musique qui se jouera dessus.</p>

<p>Comme expliqué précédemment, la map est composée d'un décor et d'éléments dynamiques posés dessus.</p>

<h2 id="lestiles">Les tiles</h2>

<p>Le décor d'une map est composé d'une multitude d'images carrées, de taille 8x8 ou parfois plus, souvent répétés.  </p>

<p><strong>Exemple</strong> : sur cette image, on peut voir deux tiles différentes, de 16x16 pixels <br />
<img src="img/tiles1.png" alt="Image indisponible" /> <br />
Celle de droite n'est présente qu'une fois, mais celle de droite à été répétée pour créer le motif du sol.</p>

<h4 id="tilesets">Tilesets</h4>

<p>Ces images sont regroupées sur des <strong>tilesets</strong>, de grandes images contenant toutes les tiles nécessaires à une map (on trouvera par exemple un tileset pour les maisons de base, un pour le donjon 1, etc). Avant de commencer à palcer des tiles sur une map et donc construire sond écor, il faut donc choisir le tileset, dans les propriétés de la map (au centre de l'écran).</p>

<p>(note : vous pouvez aussi aller voir le tileset directement, avec chaque tile et leurs propriétés dont on parlera plus tard, dans le dossier <code>data/tilesets/</code>, ou en cliquant sur l'icône crayon à côté du tileset sélectionné)</p>

<h4 id="placerdestiles">Placer des tiles</h4>

<p>Une fois le tileset choisi, il apparaît en dessous de propriétés, juste à droite de l'aperçu de la map. <br />
A partir de là, c'est très simple : on clique sur une tile pour la sélectionner, pour on clique sur la map là où on veut la placer. <br />
Il existe quelques subtilités que j'ajouterait plus tard (mais n'hésitez pas à demander à Zuna en attendant), mais en voici quelques unes assez indispensables :</p>

<ul>
<li>Maintenir clic gauche appuyé quand on place une tile sur la map et déplacer la souris dans une direction répète la tile, utile pour les grandes surfaces constituées d'une seule tile répétée. Certaines tiles ne peuvent pas être répétées ; d'autres ne peuvent l'être que dans une seule direction (ex : les murs horizontaux ne peuvent être répétés qu'à l'horizontale, etc)</li>

<li>Double-clic sur une tile pour afficher ses propriétés : il y est par exemple possible de chanegr manuellement leur position et leur taille.</li>
</ul>

<p>Il est important de noter que certains tiles sont animées (toutes les frames de l'animation sont présentes côte à côte sur le tileset).</p>

<p>Note : certaines tiles doivent parfois se chevaucher : pour décider de laquelle s'affiche au dessus, clic-droit -> mettre à l'arrière-plan / mettre au premier plan. (voir aussi le paragraphe "couches")</p>

<h4 id="typedeterrain">Type de terrain</h4>

<p>De plus, il s'avère qu'en réalité j'ai menti : les tiles ne sont pas uniquement un décor inerte ; certaines peuvent interagir avec les entités. En effet, les tiles possèdent un <em>type de terrain</em> (on ne peut d'ailleurs pas savoir le type de terrain d'une tile dans l'éditeur de map : pour savoir le type de terrain d'une tile, allez voir directement le tileset). <br />
Ces types sont :  </p>

<ul>
<li>Traversable : aucun effet.</li>

<li>Mur : Est considéré comme un obstacle pour les entités.</li>

<li>Muret : Par défaut, exactement pareil, cependant j'ai codé certaines entités de manière à passer au dessus, comme les flèches ou les entités volantes.  </li>

<li>Vide : comme traversable, avec une différence que l'on verra au prochain paragraphe.</li>
</ul>

<p>Les autres ont des effets plus particuliers, et sont assez explicites :</p>

<ul>
<li>Trous, piquants, eau profonde, lave : tiles qui auront chacune particulier sur les entités passant dessus, en particulier sur Link (tue les monstres directement, et inflige des dégâts à Link avant de le faire revenir en arrière).</li>

<li>Eau peu profonde, herbe : Modifie un peu l'animation de Link et joue un son lorsqu'il marche dessus. </li>

<li>Et qques autres un peu osef</li>
</ul>

<h4 id="couches">Couches</h4>

<p>En effet, les maps se sont pas des environements <em>entièrement</em> 2D : les tiles peuvent être à différentes hauteurs, symbolisées par des couches/layers. Toutes les tiles sont par défaut à la couche 0, mais on peut changer ça avec un simple clic-droit. <br />
Le système est assez simple, les tiles de la couche 1 s'affiche toujours au dessus de la couche 0 (modifier l'ordre des tiles avec clic-droit -> mettre à l'arrière-plan / mettre au premier plan n'a d'effet qu'au sein d'une même couche : mettre à l'arriere plan une tile de la couche 1 l'affichera sous les tiles de la couche 1 mais au dessus de toutes les tiles de la couche 0) <br />
Nous y reviendront dans la partie dédiée, mais les entités se trouvent toujours sur une couche : si Link de trouve sur une couche, il y restera tant qu'il y a une tile Traversable sous ses pieds à la même couche que lui ; s'il se retrouve sur un tile avec Vide comme type de terrain, ou juste un endroit sans tile, il "tombera" (descendra les couches jusqu'à retomber sur une tile non vide ou à la couche 0.  </p>

<p>(note: les entités sont toujours affichées au dessus des tiles de leur couche ; pour qu'une tile s'affiche par dessus Link, il faudra la placer sur une couche supérieure à celle où se trouvera Link)</p>

<h2 id="entits">Entités</h2>

<p>Mon tournoi va pas tarder à commencer faut que j'y aille, bref je fais la partie sur les entités le plus prochainement possible LA BISE</p>